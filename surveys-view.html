<link rel="import" href="surveys-list.html">
<link rel="import" href="surveys-input.html">
<link rel="import" href="surveys-sm-list.html">
<link rel="import" href="../paper-button/paper-button.html">
<link rel="import" href="../mediator-data/mediator-data.html">
<!--
`<surveys-view location="[[location]]" edit="{{edit}}" folder="[[surveysFolder]]" default-folder="{{surveysDefaultFolder}}" edit-default="{{editDefault}}"></surveys-view>`
-->

<dom-module id="surveys-view">
  <template>
    <mediator-data id="s" as-array="{{surveys}}" location="{{location}}" folder="[[folder]]" default-folder="{{defaultFolder}}"></mediator-data>
    <div class="content">
      <surveys-sm-list hidden="{{admin}}" on-tap="toggleView" surveys="{{surveys}}" on-delete-survey="deleteSurveyQuestion"></badge-sm-list>
      <template is="dom-if" if="{{admin}}">
        <surveys-list badges="{{badges}}" on-delete-survey="deleteSurveyQuestion"></surveys-list>
        <surveys-input on-add-badge="addBadge"></surveys-input>
        <paper-button raised on-tap="toggleView" >Done</paper-button>
      </template>
    </div>
  </template>
</dom-module>
<script>
  Polymer({
    is: "surveys-view"
      properties: {
      badges: Array,
      edit: Boolean,
      editDefault: Boolean
    },
    addSurveyQuestion: function(e) {
      this.$.s.push({
        question: e.detail.question,
        isComplete: false,
        answer: Null
      });
    },
    deleteSurveyQuestion: function(e) {
      this.arrayDelete('surveys', e.detail.surveyQuestion); //TODO e.detail.??
    },
    toggleView: function() {
      if (this.edit) this.admin = !this.admin;
    }
  });
</script>
